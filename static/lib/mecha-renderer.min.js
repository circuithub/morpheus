/*
 * Copyright 2011, CircuitHub.com
 */var mecha=mecha||{};mecha.renderer=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return g=Math.sqrt(2),e=1/g,d=Math.PI/180,f=180/Math.PI,Math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},mecha.log=typeof console!="undefined"&&console!==null&&console.log!=null?function(){return console.log.apply(console,arguments)}:function(){},mecha.logInternalError=typeof console!="undefined"&&console!==null&&console.error!=null?function(){return console.error.apply(console,arguments)}:function(){},mecha.logApiError=typeof console!="undefined"&&console!==null&&console.error!=null?function(){return console.error.apply(console,arguments)}:function(){},mecha.logApiWarning=typeof console!="undefined"&&console!==null&&console.warn!=null?function(){return console.warn.apply(console,arguments)}:function(){},h=function(a,b,c,d){var e;return e=a.get(b),e[c]=d,a.set(b,e)},k=function(a){return[a.x,a.y,a.z]},l=function(a){return[a.x,a.y,a.z,a.w]},m=function(a){return{x:a[0],y:a[1],z:a[2]}},n=function(a){return{x:a[0],y:a[1],z:a[2],w:a[3]}},c=function(a){var b,c,d,e,f,g;return b=k(a.eye),c=k(a.look),d=k(a.up),e=[0,0,0],f=[0,0,0],g=[0,0,0],SceneJS_math_subVec3(c,b,g),SceneJS_math_cross3Vec3(d,g,e),SceneJS_math_cross3Vec3(g,e,f),SceneJS_math_normalizeVec3(e),SceneJS_math_normalizeVec3(f),SceneJS_math_normalizeVec3(g),SceneJS_math_newQuaternionFromMat3(e.concat(f,g))},i=function(a,b,c){var d,e,f,g,h,i,j,l,n,o,p,q,r,s,t,u;return a[0]===0&&a[1]===0?{eye:c.eye,up:c.up}:(f=k(c.eye),s=k(c.up),j=k(c.look),g=SceneJS_math_lenVec3(f),h=[0,0,0],SceneJS_math_mulVec3Scalar(f,1/g,h),o=[0,0,0],SceneJS_math_cross3Vec3(s,f,o),p=SceneJS_math_normalizeVec3(o),t=[0,0,0],SceneJS_math_cross3Vec3(h,p,t),d=[p[0]*-a[1]+t[0]*-a[0],p[1]*-a[1]+t[1]*-a[0],p[2]*-a[1]+t[2]*-a[0]],e=SceneJS_math_lenVec2(a),n=SceneJS_math_rotationMat4v(e,d),i=SceneJS_math_transformVector3(n,f),q=SceneJS_math_transformVector3(n,o),r=[0,0,0],SceneJS_math_mulVec3(q,b,r),SceneJS_math_subVec3(q,r),u=[0,0,0],SceneJS_math_cross3Vec3(i,q,u),l={eye:m(i),look:c.look,up:m(u)})},j=function(a,b,c){return a.set(i(b,c,{eye:a.get("eye"),look:a.get("look"),up:a.get("up")}))},o=function(a,b,c){var d,e,f,g,h,i;return d=k(c.eye),h=k(c.look),e=SceneJS_math_lenVec3(d),b!=null?g=Math.clamp(e+a,b[0],b[1]):g=e+a,f=[0,0,0],SceneJS_math_mulVec3Scalar(d,g/e,f),i={eye:m(f),look:c.look,up:c.up}},p=function(a,b,c){return a.set(o(b,c,{eye:a.get("eye"),look:a.get("look"),up:a.get("up")}))},a=function(){return SceneJS.createScene({type:"scene",id:"Scene",canvasId:"scenejsCanvas",loggingElementId:"scenejsLog",flags:{backfaces:!1},nodes:[{type:"library",nodes:[{type:"material",coreId:"cube-mat",baseColor:{r:.64,b:.64,g:.64},emit:0},{type:"geometry",coreId:"cube-mesh",primitive:"triangles",resource:"cube-mesh",positions:[1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1],normals:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,4,7,6,4,6,5,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}]},{type:"lookAt",id:"main-lookAt",eye:{y:-10,x:10,z:5},look:{y:0,x:0,z:0},up:{y:0,x:0,z:1},nodes:[{type:"camera",id:"main-camera",optics:{type:"perspective",far:100,near:.1,aspect:1,fovy:27.6380627952},nodes:[{type:"renderer",id:"main-renderer",clear:{color:!0,depth:!0,stencil:!1},clearColor:{r:.4,b:.4,g:.4},nodes:[{type:"matrix",id:"light0-transform",elements:[-0.290864378214,.955171227455,-0.055189050734,0,-0.771100878716,-0.199883162975,.604524791241,0,.566393375397,.218391060829,.794672250748,0,4.07624483109,1.00545394421,5.90386199951,1],nodes:[{type:"light",id:"light0",color:{r:1,b:1,g:1},pos:{y:0,x:0,z:0},quadraticAttenuation:555556e-9,linearAttenuation:0,mode:"point",constantAttenuation:1}]},{type:"matrix",id:"light1-transform",elements:[1,0,0,0,0,1,0,0,0,0,1,0,1.32968401909,-2.12760996819,2.74223303795,1],nodes:[{type:"light",id:"light1",color:{r:1,b:1,g:1},pos:{y:0,x:0,z:0},quadraticAttenuation:8e-4,linearAttenuation:0,mode:"point",constantAttenuation:1}]},{type:"matrix",id:"cube-transform",elements:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nodes:[{type:"material",coreId:"cube-mat",id:"cube-mat",nodes:[{type:"geometry",coreId:"cube-mesh"}]}]}]}]}]}]})},b=b!=null?b:{},b.createScene=a,b}.call(this);
<!doctype html>
<html>
<!--
      Morpheus - A sleek WebGL solid modeling tool for domain specific modeling
      Copyright (c) 2011 CircuitHub.com
-->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
  <title>Mecha</title>
  <meta name='description' content='A sleek WebGL solid modeling tool for electronic components and circuitboards'>
  <meta name='author' content='Your Name'>
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- The CSM script -->
  <script id='csm-source-code' type='csm/csm-javascript'>
translate({ offset: [0.0, 0.4, 0.0] },
  union(
    box({ dimensions: [0.2, 0.5, 0.2] })
    .bevel({ radius: 0.05 })
    .scale({ factor: 0.9 })
    .material({ color: [0.7, 0.8, 0.0] }),
    box({ dimensions: [0.5, 0.2, 0.2] })
    .translate({ offset: [0.3, 0.0, 0.3] })
    .chamfer({ radius: 0.05 })
    .rotate({ axis: [1.0, 1.0, 0.0], angle: 20.0 })
    .mirror({ axes: [0] })
    .material({ color: [0.8, 0.7, 0.0] })
  )
),
cylinder({ axis: 1, radius: 0.2, length: 0.5 })
.material({ color: [0.6, 0.7, 1.0] }),
sphere({ radius: 0.3 })
.material({ color: [0.5, 1.0, 0.0] })
.wedge({ axis: 1, from: 35, to: 75 })
.material({ color: [1.0, 0.0, 0.0] })
.translate({ offset: [0.0, -0.2, 0.0] })
  </script>

  <!-- Stylesheet -->
  <link rel='stylesheet' href='test.css' media='screen' type='text/css'></link>
</head>
<body>

  <!-- Screen layout -->

  <div id='scenejsLog' style='display:block;'></div>

  <div id='mecha-layout'>
    <form id='mecha-editor'></form>
    <div id='mecha-gui'>
      <canvas id='mecha-canvas' width='512' height='512'>
        <p>This application requires a browser that supports the<a href='http://www.w3.org/html/wg/html5/'>HTML5</a>&lt;canvas&gt; feature.</p>
      </canvas>
    </div>
  </div>

  <!-- Prompt IE users to install Chrome Frame. chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if IE]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->

  <!-- Framework -->

  <script src='//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
  <script>window.jQuery || document.write("<script src='../static/lib/jquery/jquery-1.7.1.min.js'><\/script>")</script>
  <script src='../static/lib/glquery/glquery.js'></script>
  <script src='../static/lib/glquery/glquery.math.module.js'></script>
  <link rel="jsandbox" href="../static/lib/jsandbox/jsandbox-worker.js">
  <link rel="api" href="../static/lib/mecha-api.js">
  <script src='../static/lib/jsandbox/jsandbox.js'></script>
  <script src='../static/lib/uglifyjs-parser/parse-js.js'></script>

  <!-- Testing -->

  <script src='../static/lib/debug/webgl-debug.js'></script>
  
  <!-- Application logic -->

  <script src='../static/lib/mecha.js'></script>
  <script src='../static/lib/debug/webgl-debug.js'></script>

  <script>
    window.onload = function(){
      // Make the canvas simulate losing context for testing
      var canvasEl = document.getElementById("mecha-canvas");
      canvasEl = WebGLDebugUtils.makeLostContextSimulatingCanvas(canvasEl);
      canvasEl.loseContextInNCalls(5);

      mecha.editor.create(document.getElementById('mecha-editor'), document.getElementById('csm-source-code').textContent);
      mecha.gui.create('mecha-gui', null, null, null, null, canvasEl);
    };
  </script>
</body>
</html>


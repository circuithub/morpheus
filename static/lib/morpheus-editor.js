/*
 * Copyright 2011-2013, CircuitHub.com
 */
var morpheus = morpheus || {}; /* Redeclaring morpheus is fine: behaves like a no-op (https://developer.mozilla.org/en/JavaScript/Reference/Scope_Cheatsheet) */

morpheus.editor = 
// Generated by CoffeeScript 1.6.2
(function() {
  "use strict";
  var create, exports, getSourceCode, safeExport, safeTry, translateSugaredJS;

  morpheus.log = ((typeof console !== "undefined" && console !== null) && (console.log != null) ? function() {
    return console.log.apply(console, arguments);
  } : function() {});

  morpheus.logDebug = ((typeof morpheusDebug !== "undefined" && morpheusDebug !== null) && morpheusDebug && (typeof console !== "undefined" && console !== null) && (console.log != null) ? function() {
    return console.log.apply(console, arguments);
  } : function() {});

  morpheus.logInternalError = ((typeof console !== "undefined" && console !== null) && (console.error != null) ? function() {
    return console.error.apply(console, arguments);
  } : function() {});

  morpheus.logApiError = ((typeof console !== "undefined" && console !== null) && (console.error != null) ? function() {
    return console.error.apply(console, arguments);
  } : function() {});

  morpheus.logApiWarning = ((typeof console !== "undefined" && console !== null) && (console.warn != null) ? function() {
    return console.warn.apply(console, arguments);
  } : function() {});

  morpheus.logException = function(locationName, error) {
    var logArgs;

    logArgs = ["Uncaught exception in `" + locationName + "`:\n"];
    logArgs.push((error.message != null ? "" + error.message + "\n" : error));
    if (error.stack != null) {
      logArgs.push(error.stack);
    }
    morpheus.logInternalError.apply(morpheus, logArgs);
  };

  safeExport = function(name, errorValue, callback) {
    return safeTry(name, callback, function(error) {
      morpheus.logException(name, error);
      return errorValue;
    });
  };

  safeTry = function(name, callback, errorCallback) {
    if ((typeof morpheusDebug !== "undefined" && morpheusDebug !== null) && morpheusDebug) {
      return callback;
    } else {
      return function() {
        var error;

        try {
          return callback.apply(null, arguments);
        } catch (_error) {
          error = _error;
          return errorCallback(error);
        }
      };
    }
  };

  translateSugaredJS = function(csmSourceCode) {
    return csmSourceCode;
  };

  create = safeExport('morpheus.editor.create', void 0, function(containerSelector, sourceCode) {
    if (sourceCode == null) {
      sourceCode = "";
    }
    ($(containerSelector)).html("<span><input class='morpheus-source-autocompile' name='morpheus-source-autocompile' type='checkbox' disabled='disabled'><label class='morpheus-source-autocompile-label' for='morpheus-source-autocompile'>Auto-compile</label></span>\n<input class='morpheus-source-compile' name='morpheus-source-compile' type='button' value='Compile'>\n<textarea class='morpheus-source-code' name='morpheus-source-code'>\n" + sourceCode + "\n</textarea>");
  });

  getSourceCode = safeExport('morpheus.editor.getSourceCode', '', function(containerSelector) {
    return (($(containerSelector != null ? containerSelector : document)).find('.morpheus-source-code')).val();
  });

  exports = exports != null ? exports : {};

  exports.create = create;

  exports.getSourceCode = getSourceCode;

  return exports;

}).call(this);

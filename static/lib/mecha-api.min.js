/*
 * Copyright 2011, CircuitHub.com
 */var mecha=mecha||{};mecha.api=function(){var a,b=Array.prototype.slice;return function(){var a,c,d,e,f,g,h,i,j;return g=function(a,b){var c,d;for(d in b)c=b[d],a[d]=c;return a},j=function(a){if(Array.isArray(a)){if(a.length<=4)return"vec"+a.length;throw"Parameter type with length `"+a.length+"` is not supported."}return"float"},i=function(a){if(Array.isArray(a)&&a.length>0)return i(a[0]);switch(typeof a){case"number":return"float";default:throw"Unknown parameter type `"+typeof a+"`."}},c=function(){},f=new c,a=function(a){return function(){var b;return b=g(Object.create(f),a.apply(null,arguments)),typeof this!="undefined"&&this!==null&&this instanceof c&&b.nodes.unshift(this),b}},g(f,{union:a(function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],{type:"union",nodes:a}}),intersect:a(function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],{type:"intersect",nodes:a}}),difference:a(function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],{type:"difference",nodes:a}}),box:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"box",attr:a,nodes:c}}),cylinder:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"cylinder",attr:a,nodes:c}}),sphere:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"sphere",attr:a,nodes:c}}),mirror:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"mirror",attr:a,nodes:c}}),repeat:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"repeat",attr:a,nodes:c}}),translate:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"translate",attr:a,nodes:c}}),rotate:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"rotate",attr:a,nodes:c}}),scale:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"scale",attr:a,nodes:c}}),material:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"material",attr:a,nodes:c}}),chamfer:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"chamfer",attr:a,nodes:c}}),bevel:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"bevel",attr:a,nodes:c}}),wedge:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"wedge",attr:a,nodes:c}}),bend:a(function(){var a,c;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],{type:"bend",attr:a,nodes:c}})}),window.scene=function(){var a,c,e,f;return a=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],e=function(a){var b,c,f,g;if(a instanceof d)return a.serialize();if(Array.isArray(a))for(b=0,g=a.length;0<=g?b<g:b>g;0<=g?b++:b--)a[b]=e(a[b]);else if(typeof a=="object")for(c in a)f=a[c],a[c]=e(f);return a},f=function(a){var b,c,d,g;g=[];for(c=0,d=a.length;c<d;c++)b=a[c],g.push({type:b.type,attr:e(b.attr),nodes:f(b.nodes)});return g},{type:"scene",attr:a,nodes:f(c)}},g(window,f),h=0,e=function(){function a(a){this.attr=a,this.str="u"+a.paramIndex,exportedParameters[this.str]=a}return a}(),d=function(){function a(a,b){this.param=a,this.str=b!=null?b:new String(a.str)}return a.prototype.serialize=function(){return this.str},a.prototype.update=function(b){return new a(this.param,b)},a.prototype.index=function(b){if(b instanceof a)return this.update("("+this.serialize()+")["+b.serialize()+"]");if(typeof b=="number"&&(b|0)===b)return this.update(""+this.serialize()+"["+b+"]");throw"Argument to index must be an integer"},a.prototype.mul=function(b){return b instanceof a?this.update("("+this.serialize()+") * ("+b.serialize()+")"):this.param.attr.primitiveType==="float"&&typeof b=="number"&&(b|0)===b?this.update("("+this.serialize()+") * "+b+".0"):this.update("("+this.serialize()+") * "+b)},a.prototype.div=function(b){return b instanceof a?this.update("("+this.serialize()+") / ("+b.serialize()+")"):this.param.attr.primitiveType==="float"&&typeof b=="number"&&(b|0)===b?this.update("("+this.serialize()+") / "+b+".0"):this.update("("+this.serialize()+") / "+b)},a.prototype.add=function(b){return b instanceof a?this.update("("+this.serialize()+") + ("+b.serialize()+")"):this.param.attr.primitiveType==="float"&&typeof b=="number"&&(b|0)===b?this.update("("+this.serialize()+") + "+b+".0"):this.update("("+this.serialize()+") + "+b)},a.prototype.sub=function(b){return b instanceof a?this.update("("+this.serialize()+") - ("+b.serialize()+")"):this.param.attr.primitiveType==="float"&&typeof b=="number"&&(b|0)===b?this.update("("+this.serialize()+") - "+b+".0"):this.update("("+this.serialize()+") - "+b)},a.prototype.neg=function(){return this.update("-("+this.serialize()+")")},a}(),window.range=function(a,b,c,f,g){var k,l,m;return l=h,++h,k=function(a,b){var c,d,e,f;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)throw"No product operator available for arrays of different lengths.";if(a.length>4)throw"No product operator available for arrays of lengths greater than 4.";d=0;for(c=0,e=a.length;0<=e?c<e:c>e;0<=e?c++:c--)d+=a[c]*b[c];return d}if(Array.isArray(a)){d=a.slice();for(c=0,f=a.length;0<=f?c<f:c>f;0<=f?c++:c--)d[c]*=b;return d}if(typeof a=="number"&&typeof b=="number")return a*b;throw"No product operator available operands with types `"+typeof a+"` and `"+typeof b+"`."},m=function(a,b){var c,d,e;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)throw"No subtract operator available for arrays of different lengths.";if(a.length>4)throw"No subtract operator available for arrays of lengths greater than 4.";d=a.slice();for(c=0,e=a.length;0<=e?c<e:c>e;0<=e?c++:c--)d[c]-=b[c];return d}if(typeof a=="number"&&typeof b=="number")return a-b;throw"No subtract operator available operands with types `"+typeof a+"` and `"+typeof b+"`."},new d(new e({param:"range",description:a,type:j(b),primitiveType:i(b),paramIndex:l,start:c,end:f,step:g!=null?g:k(m(f,c),.01),defaultArg:b}))},window.number=function(a,b){var c;return c=h,++h,new d(new e({param:"number",description:a,type:j(b),primitiveType:i(b),defaultArg:b}))}}(),a=a!=null?a:{},a}.call(this);